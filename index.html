<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Insight - Dashboard</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #e2e8f0; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Custom buttons */
        .btn-purple {
            background: linear-gradient(135deg, #7c3aed, #6d28d9);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(124, 58, 237, 0.3);
        }
        .btn-teal {
            background: linear-gradient(135deg, #0d9488, #0f766e);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(13, 148, 136, 0.3);
        }
        .btn-orange {
            background: linear-gradient(135deg, #f97316, #ea580c);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(249, 115, 22, 0.3);
        }
        .btn-inactive {
            background: white;
            color: #4b5563;
            border: 1px solid #e5e7eb;
        }
        .btn-inactive:hover { background: #f9fafb; }
        
        .editable:hover .edit-icon { opacity: 1; }
        .edit-icon { opacity: 0; transition: opacity 0.2s; margin-left: 4px; cursor: pointer; }

        /* Animation for Prompt Sidebar */
        #promptSidebar {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        /* Modal Animation */
        #badgeModal {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        #badgeModal.hidden-modal {
            opacity: 0;
            pointer-events: none;
            transform: scale(0.95);
        }
        #badgeModal.visible-modal {
            opacity: 1;
            pointer-events: auto;
            transform: scale(1);
        }
        
        /* Fade transition for story content */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen py-10 relative overflow-x-hidden">

    <!-- LEADER VIEW CONTROL SIDEBAR -->
    <div class="fixed top-6 left-6 z-50 bg-white p-4 rounded-xl shadow-xl border border-slate-200 w-64 hidden xl:block h-[850px] overflow-y-auto hide-scrollbar">
        <!-- Section 1 Controls -->
        <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Metric Control</h3>
        <div class="space-y-2 mb-6">
            <button onclick="switchMode('A')" id="btnA" class="w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-purple text-left flex items-center gap-2">
                <i class="fa-solid fa-chart-pie w-4"></i> Plan A: Traffic (æµé‡)
            </button>
            <button onclick="switchMode('B')" id="btnB" class="w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-inactive text-left flex items-center gap-2">
                <i class="fa-solid fa-clock w-4"></i> Plan B: Time (æ—¶é•¿)
            </button>
            <button onclick="switchMode('C')" id="btnC" class="w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-inactive text-left flex items-center gap-2">
                <i class="fa-solid fa-bolt w-4"></i> Plan C: Active (æ´»è·ƒ)
            </button>
        </div>

        <!-- Section 2 Controls (New) -->
        <div class="border-t border-slate-100 pt-4 mb-2">
            <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-wider">Story Narrator</h3>
            <div class="space-y-2">
                <button onclick="switchStory(1)" id="storyBtn1" class="w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-orange text-left flex items-center gap-2">
                    <i class="fa-solid fa-file-lines w-4"></i> Standard (æ ‡å‡†)
                </button>
                <button onclick="switchStory(2)" id="storyBtn2" class="w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-inactive text-left flex items-center gap-2">
                    <i class="fa-solid fa-gamepad w-4"></i> Gamified (æ¸¸æˆ)
                </button>
                <button onclick="switchStory(3)" id="storyBtn3" class="w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-inactive text-left flex items-center gap-2">
                    <i class="fa-solid fa-newspaper w-4"></i> Gossip (å…«å¦)
                </button>
                <button onclick="switchStory(4)" id="storyBtn4" class="w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-inactive text-left flex items-center gap-2">
                    <i class="fa-solid fa-magnifying-glass-chart w-4"></i> Behavior (è¡Œä¸º)
                </button>
                <button onclick="switchStory(5)" id="storyBtn5" class="w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-inactive text-left flex items-center gap-2">
                    <i class="fa-solid fa-cloud-moon w-4"></i> Atmosphere (æ°›å›´)
                </button>
            </div>
        </div>
        
        <div class="mt-6 p-3 bg-slate-50 rounded-lg border border-slate-100 text-[10px] text-slate-400 leading-relaxed">
            <i class="fa-solid fa-info-circle mr-1"></i> Use these controls to toggle the display modes on the main device view.
        </div>
    </div>

    <!-- PROMPT SIDEBAR (Right Side) -->
    <div id="promptSidebar" class="fixed top-1/2 -translate-y-1/2 right-6 xl:right-20 z-40 w-80 bg-white p-6 rounded-2xl shadow-2xl border border-slate-200 opacity-0 translate-x-10 pointer-events-none transition-all duration-500">
        <div class="flex justify-between items-center mb-4 border-b border-slate-100 pb-2">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest">Prompt Details</h3>
            <button onclick="closePrompt()" class="text-slate-400 hover:text-slate-600"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="space-y-3">
            <div class="text-[10px] font-bold text-slate-400 uppercase">Input Prompt (Chinese)</div>
            <div id="promptContent" class="text-sm text-slate-600 leading-relaxed font-mono bg-slate-50 p-3 rounded-lg border border-slate-100">
                Select a story to view the underlying prompt.
            </div>
        </div>
        <div class="mt-4 pt-2 border-t border-slate-100 flex items-center gap-2 text-xs text-slate-400">
            <i class="fa-solid fa-robot"></i>
            <span>Generated by Family AI Model</span>
        </div>
    </div>

    <!-- MAIN DEVICE -->
    <div class="w-full max-w-[400px] bg-slate-50 h-[850px] rounded-[40px] shadow-2xl overflow-hidden border-[8px] border-slate-900 relative flex flex-col">
        
        <!-- Status Bar -->
        <div class="px-6 pt-4 pb-2 flex justify-between items-center text-xs font-bold text-slate-900 z-50 bg-slate-50 shrink-0">
            <span>9:41</span>
            <div class="flex gap-1.5">
                <i class="fa-solid fa-signal"></i>
                <i class="fa-solid fa-wifi"></i>
                <i class="fa-solid fa-battery-full"></i>
            </div>
        </div>

        <!-- HOME VIEW CONTAINER -->
        <div id="homeView" class="flex flex-col h-full w-full absolute top-0 left-0 pt-[44px] transition-transform duration-300 ease-in-out bg-slate-50">
            
            <header class="px-6 py-2 pb-4 bg-slate-50 flex justify-between items-center shrink-0">
                <div class="editable" onclick="editFamilyName(this)">
                    <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Family Insight</div>
                    <h1 id="familyName" class="text-2xl font-extrabold text-slate-800 tracking-tight inline-block">
                        The Millers
                        <span class="edit-icon text-slate-400">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </span>
                    </h1>
                </div>
                <div class="w-10 h-10 rounded-full bg-slate-200 overflow-hidden border-2 border-white shadow-sm">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Admin" alt="Admin">
                </div>
            </header>

            <main class="flex-1 overflow-y-auto hide-scrollbar px-5 pb-8 space-y-6 relative">

                <!-- Section 1: Chart (Controlled by Plan A/B/C) -->
                <section id="section1" class="relative rounded-3xl p-5 text-white shadow-lg overflow-hidden transition-all duration-500 bg-gradient-to-br from-indigo-600 to-purple-700">
                    <div class="absolute -top-10 -right-10 w-40 h-40 bg-white opacity-10 rounded-full blur-3xl"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-1">
                            <div>
                                <p class="text-indigo-200 text-xs font-bold uppercase tracking-wider">The Digital Vibe</p>
                                <h2 id="vibeTitle" class="text-xl font-bold">Cinema Paradise ğŸ¬</h2>
                            </div>
                            <span id="vibeBadge" class="bg-white/20 backdrop-blur-md px-2 py-1 rounded text-[10px] font-bold border border-white/10">Traffic Analysis</span>
                        </div>
                        <div class="flex items-center mt-2">
                            <div class="w-[180px] h-[180px] relative -ml-2">
                                <canvas id="radarChart"></canvas>
                            </div>
                            <div class="flex-1 pl-2 space-y-3">
                                <div class="group">
                                    <div class="flex justify-between text-xs text-indigo-100 mb-0.5"><span id="label1">Video</span><span id="val1" class="font-bold text-white">90 GB</span></div>
                                    <div class="w-full bg-black/20 h-1.5 rounded-full overflow-hidden"><div id="bar1" class="h-full bg-amber-400 rounded-full" style="width: 90%"></div></div>
                                </div>
                                <div class="group">
                                    <div class="flex justify-between text-xs text-indigo-100 mb-0.5"><span id="label2">Download</span><span id="val2" class="font-bold text-white">30 GB</span></div>
                                    <div class="w-full bg-black/20 h-1.5 rounded-full overflow-hidden"><div id="bar2" class="h-full bg-pink-400 rounded-full" style="width: 70%"></div></div>
                                </div>
                                <div class="group">
                                    <div class="flex justify-between text-xs text-indigo-100 mb-0.5"><span id="label3">Game</span><span id="val3" class="font-bold text-white">15 GB</span></div>
                                    <div class="w-full bg-black/20 h-1.5 rounded-full overflow-hidden"><div id="bar3" class="h-full bg-cyan-400 rounded-full" style="width: 30%"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 2: Family Scoop (Controlled by Story Narrator) -->
                <section id="storySection" class="bg-white rounded-3xl p-5 shadow-sm border border-slate-100 transition-all duration-300">
                    
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex items-center gap-2">
                            <span id="storyIcon" class="bg-orange-100 text-orange-600 p-1.5 rounded-lg text-xs"><i class="fa-solid fa-newspaper"></i></span>
                            <h3 id="storyTitle" class="font-bold text-slate-800 text-sm uppercase">Family Scoop</h3>
                        </div>
                        <!-- Prompt Trigger -->
                        <button onclick="showCurrentPrompt()" class="text-[10px] font-bold text-orange-500 hover:text-orange-700 bg-orange-50 px-2 py-1 rounded-md transition-colors border border-orange-100">
                            <i class="fa-solid fa-terminal mr-1"></i>Prompt
                        </button>
                    </div>
                    
                    <div id="storyContent" class="mt-2 text-sm text-slate-600 leading-relaxed font-medium">
                        <!-- Content injected via JS -->
                    </div>
                </section>

                <!-- Section 3: Live Activity -->
                <section class="bg-white rounded-3xl p-5 shadow-sm border border-slate-100">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="bg-green-100 text-green-600 p-1.5 rounded-lg text-xs"><i class="fa-solid fa-bolt"></i></span>
                        <h3 class="font-bold text-slate-800 text-sm uppercase">Live Activity</h3>
                    </div>
                    <div class="relative pl-4 border-l-2 border-slate-100 space-y-5">
                        <div class="relative">
                            <div class="absolute -left-[21px] top-0 h-3 w-3 rounded-full bg-blue-500 border-2 border-white shadow"></div>
                            <div class="flex justify-between items-start"><p class="text-xs font-bold text-slate-700">Dad's iPhone connected to Wi-Fi</p><span class="text-[10px] text-slate-400 font-mono">18:30</span></div>
                        </div>
                        <div class="relative">
                            <div class="absolute -left-[21px] top-0 h-3 w-3 rounded-full bg-purple-500 border-2 border-white shadow"></div>
                            <div class="flex justify-between items-start"><p class="text-xs font-bold text-slate-700">Jack's PC hit peak (50MB/s)</p><span class="text-[10px] text-slate-400 font-mono">16:45</span></div>
                        </div>
                        <div class="relative">
                            <div class="absolute -left-[21px] top-0 h-3 w-3 rounded-full bg-pink-500 border-2 border-white shadow"></div>
                            <div class="flex justify-between items-start"><p class="text-xs font-bold text-slate-700">Emma on Roblox for 2 hours</p><span class="text-[10px] text-slate-400 font-mono">15:00</span></div>
                        </div>
                    </div>
                </section>

                <!-- Section 4: Digital Sync -->
                <section class="bg-gradient-to-r from-slate-800 to-slate-900 rounded-3xl p-5 text-white shadow-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-sm uppercase text-slate-400">Digital Sync</h3>
                        <button class="text-xs bg-white/10 hover:bg-white/20 px-2 py-1 rounded transition-colors text-slate-300">
                            <i class="fa-solid fa-user-group mr-1"></i> Switch
                        </button>
                    </div>
                    <div class="bg-white/10 rounded-xl p-4 border border-white/20 relative overflow-hidden">
                        <div class="absolute right-0 top-0 w-16 h-16 bg-pink-500 blur-2xl opacity-20"></div>
                        
                        <div class="flex items-center justify-between mb-3 px-2">
                            <div class="flex flex-col items-center">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Admin" class="w-10 h-10 rounded-full bg-slate-200 border-2 border-slate-800 shadow-lg">
                                <span class="text-[10px] mt-1 text-slate-400 font-bold">Dad</span>
                            </div>
                            
                            <div class="flex flex-col items-center flex-1 px-4">
                                <span class="text-2xl font-bold text-pink-400 mb-1">85%</span>
                                <div class="w-full bg-slate-700 h-1.5 rounded-full overflow-hidden">
                                    <div class="bg-gradient-to-r from-pink-500 to-purple-500 h-full rounded-full" style="width: 85%"></div>
                                </div>
                            </div>

                            <div class="flex flex-col items-center">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Molly" class="w-10 h-10 rounded-full bg-slate-200 border-2 border-slate-800 shadow-lg">
                                <span class="text-[10px] mt-1 text-slate-400 font-bold">Mom</span>
                            </div>
                        </div>
                        
                        <p class="text-[10px] text-slate-200 leading-relaxed text-center opacity-90">
                            Your compatibility is very high! You both enjoy visiting YouTube and surfing the web at night.
                        </p>
                    </div>
                </section>

                <!-- Section 5: Daily Awards -->
                <section>
                    <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3 ml-1">Daily Awards</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div onclick="showBadgeDetails('Early Bird', 'Mom', 'Online at 5:30 AM for Yoga.', '3', '2')" class="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center text-center shadow-sm active:scale-95 transition cursor-pointer">
                            <div class="w-10 h-10 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-2 text-lg shadow-sm border border-amber-100">ğŸŒ…</div>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Early Bird</span>
                            <span class="text-sm font-bold text-slate-800">Mom</span>
                        </div>
                        <div onclick="showBadgeDetails('Night Owl', 'Kevin', 'Last offline: 02:45 AM.', '5', '4')" class="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center text-center shadow-sm active:scale-95 transition cursor-pointer">
                            <div class="w-10 h-10 bg-indigo-50 text-indigo-500 rounded-full flex items-center justify-center mb-2 text-lg shadow-sm border border-indigo-100">ğŸ¦‰</div>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Night Owl</span>
                            <span class="text-sm font-bold text-slate-800">Kevin</span>
                        </div>
                        <div onclick="showBadgeDetails('Data Monster', 'Jack', 'Consumed 42GB today.', '2', '1')" class="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center text-center shadow-sm active:scale-95 transition cursor-pointer">
                            <div class="w-10 h-10 bg-rose-50 text-rose-500 rounded-full flex items-center justify-center mb-2 text-lg shadow-sm border border-rose-100">ğŸ¦–</div>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Data Monster</span>
                            <span class="text-sm font-bold text-slate-800">Jack</span>
                        </div>
                        <div onclick="showBadgeDetails('Focus Master', 'Dad', '6h of Office Apps.', '10', '7')" class="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center text-center shadow-sm active:scale-95 transition cursor-pointer">
                            <div class="w-10 h-10 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-2 text-lg shadow-sm border border-blue-100">ğŸ§˜</div>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Focus Master</span>
                            <span class="text-sm font-bold text-slate-800">Dad</span>
                        </div>
                    </div>
                </section>

                <!-- Section 6: Network Statistics (Fixed Chart) -->
                <section class="bg-slate-800 rounded-3xl p-5 text-white shadow-lg mb-10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-2">
                            <span class="bg-emerald-500/20 text-emerald-400 p-1.5 rounded-lg text-xs"><i class="fa-solid fa-chart-simple"></i></span>
                            <h3 class="font-bold text-sm uppercase text-slate-200">Network Stats</h3>
                        </div>
                        <span class="text-[10px] text-slate-500 bg-slate-900/50 px-2 py-1 rounded">Updated Just now</span>
                    </div>
                    
                    <!-- Today -->
                    <div class="mb-5">
                        <h4 class="text-[10px] font-bold text-slate-500 uppercase mb-2 tracking-wider">Today (24h)</h4>
                        <div class="grid grid-cols-2 gap-3">
                             <div class="bg-white/5 p-3 rounded-xl border border-white/10 hover:bg-white/10 transition-colors">
                                 <div class="text-[10px] text-slate-400 uppercase">Total Traffic</div>
                                 <div class="text-xl font-bold text-emerald-400 my-0.5">145 GB</div>
                                 <div class="text-[9px] text-slate-500">Video 90GB Â· Game 40GB</div>
                             </div>
                             <div class="bg-white/5 p-3 rounded-xl border border-white/10 hover:bg-white/10 transition-colors">
                                 <div class="text-[10px] text-slate-400 uppercase">Total Time</div>
                                 <div class="text-xl font-bold text-blue-400 my-0.5">32.5 Hrs</div>
                                 <div class="text-[9px] text-slate-500">Across 8 devices</div>
                             </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3 mt-3">
                             <div class="bg-white/5 p-3 rounded-xl border border-white/10 flex justify-between items-center hover:bg-white/10 transition-colors">
                                 <div>
                                    <div class="text-[10px] text-slate-400 uppercase">Online Devices</div>
                                    <div class="text-lg font-bold">8</div>
                                 </div>
                                 <i class="fa-solid fa-laptop text-slate-600 text-lg"></i>
                             </div>
                             <div class="bg-white/5 p-3 rounded-xl border border-white/10 flex justify-between items-center hover:bg-white/10 transition-colors">
                                 <div>
                                    <div class="text-[10px] text-slate-400 uppercase">Apps Visited</div>
                                    <div class="text-lg font-bold">42</div>
                                 </div>
                                 <i class="fa-solid fa-layer-group text-slate-600 text-lg"></i>
                             </div>
                        </div>
                    </div>

                    <!-- History -->
                    <div class="pt-3 border-t border-white/10">
                        <h4 class="text-[10px] font-bold text-slate-500 uppercase mb-3 tracking-wider">History (All Time)</h4>
                        <div class="bg-slate-900/50 rounded-xl p-3 border border-white/5 flex justify-between divide-x divide-white/10">
                            <div class="px-2 text-center flex-1">
                                <div class="text-[9px] text-slate-500 uppercase mb-1">Traffic</div>
                                <div class="font-bold text-sm text-slate-200">4.2 TB</div>
                            </div>
                            <div class="px-2 text-center flex-1">
                                <div class="text-[9px] text-slate-500 uppercase mb-1">Time</div>
                                <div class="font-bold text-sm text-slate-200">1.2k Hr</div>
                            </div>
                             <div class="px-2 text-center flex-1">
                                <div class="text-[9px] text-slate-500 uppercase mb-1">Apps</div>
                                <div class="font-bold text-sm text-slate-200">156</div>
                            </div>
                        </div>
                    </div>
                </section>

            </main>
            
            <nav class="h-20 bg-white border-t border-slate-100 flex justify-around items-center pb-2 shrink-0 z-20">
                <div class="flex flex-col items-center gap-1 text-indigo-600"><i class="fa-solid fa-house text-lg"></i><span class="text-[10px] font-medium">Home</span></div>
                <div class="flex flex-col items-center gap-1 text-slate-400"><i class="fa-solid fa-chart-pie text-lg"></i><span class="text-[10px] font-medium">Insight</span></div>
                <div class="flex flex-col items-center gap-1 text-slate-400"><i class="fa-solid fa-shield-halved text-lg"></i><span class="text-[10px] font-medium">Safety</span></div>
                <div class="flex flex-col items-center gap-1 text-slate-400"><i class="fa-solid fa-gear text-lg"></i><span class="text-[10px] font-medium">Settings</span></div>
            </nav>
        </div>

        <!-- APP MODAL -->
        <div id="badgeModal" class="absolute inset-0 z-[60] flex items-center justify-center p-6 hidden-modal">
            <div class="absolute inset-0 bg-slate-900/50 backdrop-blur-sm" onclick="closeBadgeModal()"></div>
            <div class="bg-white w-full max-w-sm rounded-3xl shadow-2xl p-6 relative z-10 animate-scale-in">
                <div class="flex justify-end">
                    <button onclick="closeBadgeModal()" class="text-slate-400 hover:text-slate-600 w-8 h-8 rounded-full flex items-center justify-center bg-slate-50"><i class="fa-solid fa-xmark"></i></button>
                </div>
                <div class="flex flex-col items-center text-center -mt-2">
                    <div id="modalIcon" class="w-20 h-20 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 text-4xl shadow-sm border-4 border-amber-100">
                        ğŸ†
                    </div>
                    <h3 id="modalTitle" class="text-xl font-extrabold text-slate-800 mb-1">Achievement</h3>
                    <p id="modalUser" class="text-sm font-bold text-slate-500 uppercase tracking-wide mb-4">Winner Name</p>
                    
                    <div class="w-full bg-slate-50 rounded-xl p-4 border border-slate-100 mb-4">
                        <p id="modalDesc" class="text-sm text-slate-600 font-medium leading-relaxed">Description goes here.</p>
                    </div>
                    
                    <div class="flex w-full gap-3">
                        <div class="flex-1 bg-slate-50 rounded-xl p-3 border border-slate-100">
                            <span class="block text-xs text-slate-400 font-bold uppercase">Total</span>
                            <span id="modalTotal" class="block text-xl font-bold text-slate-800">0</span>
                        </div>
                        <div class="flex-1 bg-slate-50 rounded-xl p-3 border border-slate-100">
                            <span class="block text-xs text-slate-400 font-bold uppercase">Streak</span>
                            <span id="modalStreak" class="block text-xl font-bold text-indigo-600">0</span>
                        </div>
                    </div>
                    
                    <button onclick="closeBadgeModal()" class="mt-6 w-full py-3 bg-slate-900 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-200 active:scale-95 transition">Awesome!</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- DATA & CONFIG ---
        
        // Prompts (Chinese)
        const prompts = {
            1: "åŸºäºå…¨å¤©çš„å®¶åº­ç½‘ç»œæ—¥å¿—ï¼Œç”Ÿæˆä¸€ä¸ªä¸­ç«‹ã€å‹å¥½çš„â€œä»Šæ—¥ç½‘ç»œæ•…äº‹â€ã€‚\næ€»ç»“å…¨å¤©çš„å·¥ä½œã€å­¦ä¹ å’Œå¨±ä¹æƒ…å†µã€‚\né™åˆ¶åœ¨60å­—ä»¥å†…ã€‚\næ¯è¡Œä¸€å¥è¯ã€‚\næœ€å¤šä½¿ç”¨5ä¸ªè¡¨æƒ…ç¬¦å·ã€‚\né¿å…æ•°å­—å’Œç¹é‡çš„ç»Ÿè®¡æ•°æ®ã€‚\nè¯­æ°”ï¼šå¹³é™ã€å¹³è¡¡ã€é€‚åˆå®¶åº­ã€‚",
            2: "å°†ä»Šå¤©çš„å®¶åº­ç½‘ç»œæ´»åŠ¨å˜æˆä¸€ä¸ªè½»æ¾çš„æ¸¸æˆåŒ–æ•…äº‹ã€‚\næŠŠä¸€å¤©æè¿°ä¸ºå…³å¡ã€ä»»åŠ¡æˆ–å›åˆã€‚\næ¶µç›–ä»æ—©åˆ°æ™šã€‚\n60å­—ä»¥å†…ã€‚\næ¯è¡Œä¸€å¥è¯ã€‚\næœ€å¤š5ä¸ªè¡¨æƒ…ç¬¦å·ã€‚\nè¯­æ°”ï¼šé¡½çš®ã€å……æ»¡æ´»åŠ›ã€‚",
            3: "åƒå†™è½»æ¾çš„å…«å¦ä¸“æ ä¸€æ ·å†™ä»Šå¤©çš„å®¶åº­ç½‘ç»œæ•…äº‹ã€‚\nå…³æ³¨â€œè°åœ¨çº¿ä¸Šåšäº†ä»€ä¹ˆâ€ã€‚\nä¿æŒé¡½çš®ï¼Œä¸è¦è¯„åˆ¤ã€‚\n60å­—ä»¥å†…ã€‚\næ¯è¡Œä¸€å¥è¯ã€‚\né¿å…æ•°å­—ã€‚",
            4: "ä»è¡Œä¸ºæ´å¯Ÿçš„è§’åº¦æ€»ç»“ä»Šå¤©çš„å®¶åº­ç½‘ç»œä½¿ç”¨æƒ…å†µã€‚\nå…³æ³¨æ¨¡å¼å’ŒèŠ‚å¥ï¼Œè€Œä¸æ˜¯ç»†èŠ‚ã€‚\næ¶µç›–ä»æ—©åˆ°æ™šã€‚\n60å­—ä»¥å†…ã€‚\næ¯è¡Œä¸€å¥è¯ã€‚\nè¯­æ°”ï¼šè§‚å¯Ÿæ€§ã€æ·±æ€ç†Ÿè™‘ã€‚",
            5: "åŸºäºå…¨å¤©çš„å®¶åº­ç½‘ç»œæ´»åŠ¨åˆ›å»ºä¸€ä¸ªæŠ½è±¡ã€å……æ»¡æ°›å›´çš„æ•…äº‹ã€‚\nå…³æ³¨æƒ…ç»ªå’ŒæµåŠ¨ï¼Œè€Œä¸æ˜¯å…·ä½“è¡ŒåŠ¨ã€‚\n60å­—ä»¥å†…ã€‚\næ¯è¡Œä¸€å¥è¯ã€‚\nè¯­è¨€æ„Ÿè§‰å¹³é™ä¸”å…·è±¡ã€‚"
        };

        // Stories Content (Chinese)
        const stories = {
            1: {
                title: "Family Scoop (Standard)",
                content: "çˆ¸çˆ¸ä¸€æ—©å°±åœ¨å¤„ç†é‚®ä»¶å’Œçœ‹è§†é¢‘â˜•<br>å¦ˆå¦ˆåœ¨åšå®¶åŠ¡çš„é—´éš™åˆ·äº†åˆ·ç¤¾äº¤åª’ä½“ğŸ“±<br>å­©å­ä»¬åœ¨åšä½œä¸šå’Œçœ‹çŸ­è§†é¢‘ä¹‹é—´åˆ‡æ¢ğŸ“<br>æ™šä¸Šï¼Œå…¨å®¶äººéƒ½åœ¨çœ‹æµåª’ä½“å’Œåˆ·å±ğŸ“º<br>è¿™æ˜¯å·¥ä½œã€å­¦ä¹ å’Œæ”¾æ¾å¹³è¡¡çš„ä¸€å¤©âœ¨",
                icon: "fa-newspaper",
                color: "text-orange-600 bg-orange-100"
            },
            2: {
                title: "Gamified Story",
                content: "æ—©æ™¨çš„ä»»åŠ¡ä»å·¥ä½œé‚®ä»¶å’Œå­¦æ ¡è§†é¢‘å¼€å§‹ğŸ®<br>ä¸­åˆï¼Œä»»åŠ¡æ¸…ç©ºï¼ŒæŠ€èƒ½å‡çº§<br>ä¸‹åˆçš„æ¸¸æˆæ—¶é—´è§£é”äº†å¨±ä¹å’ŒèŠå¤©<br>å¤œé—´æ¨¡å¼å¼€å¯ï¼Œå…¨å®¶è¿›å…¥æµåª’ä½“å’Œæ·±å¤œåˆ·å±çŠ¶æ€ğŸŒ™<br>æ‰€æœ‰ç©å®¶æˆåŠŸä¸‹çº¿",
                icon: "fa-gamepad",
                color: "text-purple-600 bg-purple-100"
            },
            3: {
                title: "Family Gossip",
                content: "çˆ¸çˆ¸ä¸€ç›´å¿ äºå·¥ä½œAppï¼Œå¶å°”å·çœ‹è§†é¢‘ğŸ‘€<br>å¦ˆå¦ˆæ•´å¤©éƒ½åœ¨åˆ·ç¤¾äº¤åŠ¨æ€<br>å­©å­ä»¬åœ¨ç½‘è¯¾å’Œæ¸¸æˆä¹‹é—´åå¤æ¨ªè·³<br>æ™šé¥­åï¼Œå¤§å®¶éƒ½å®‰é™äº†â€”â€”å±å¹•äº®ç€ï¼Œç¯å…‰æš—ç€ğŸ“±<br>å…¸å‹çš„å®¶åº­ç½‘ç»œå‰§",
                icon: "fa-comments",
                color: "text-rose-600 bg-rose-100"
            },
            4: {
                title: "Behavior Insight",
                content: "æ—©æ™¨çš„æ´»åŠ¨åå‘äºç”Ÿäº§åŠ›å’Œå­¦ä¹ <br>ä¸­åˆçš„ä½¿ç”¨é‡è¾ƒå°‘ä¸”ç¢ç‰‡åŒ–<br>ä¸‹åˆæ··åˆäº†å­¦ä¹ å’Œå¨±ä¹<br>æ™šä¸Šæ˜¾ç¤ºå…¨å®¶äººçš„å±å¹•æ—¶é—´é«˜åº¦åŒæ­¥ğŸ“Š<br>ä½œæ¯æ¸…æ™°ï¼Œå†²çªæå°‘",
                icon: "fa-magnifying-glass-chart",
                color: "text-teal-600 bg-teal-100"
            },
            5: {
                title: "Atmospheric",
                content: "ä¸€å¤©åœ¨å®é™ä¸­å¼€å§‹ï¼Œå±å¹•éšç€æˆ¿å­ä¸€èµ·è‹é†’ğŸŒ…<br>ä¿¡å·åœ¨å…±äº«çš„æ—¥å¸¸ä¸­æµåŠ¨<br>åˆåå……æ»¡äº†æ¬¢ç¬‘ã€ä¸“æ³¨å’Œåœé¡¿<br>å¤œæ™šï¼ŒæŸ”å’Œçš„å…‰çº¿å’Œç¨³å®šçš„æ•°æ®æµå æ®äº†ä¸€åˆ‡âœ¨<br>å®¶åœ¨ç½‘ç»œä¸­ä¼‘æ†©",
                icon: "fa-cloud-moon",
                color: "text-amber-600 bg-amber-100"
            }
        };

        // Chart Data
        const dataA = {
            chartData: [90, 15, 10, 5, 5, 30],
            title: "Cinema Paradise ğŸ¬",
            badge: "Traffic Analysis",
            bgClass: "from-indigo-600 to-purple-700",
            stats: [
                { label: "Video", val: "90 GB", width: "90%", color: "bg-amber-400" },
                { label: "Download", val: "30 GB", width: "70%", color: "bg-pink-400" },
                { label: "Game", val: "15 GB", width: "30%", color: "bg-cyan-400" }
            ]
        };
        const dataB = {
            chartData: [15, 30, 12, 8, 6, 4],
            title: "E-Sports Camp ğŸ®",
            badge: "Time Analysis",
            bgClass: "from-emerald-600 to-teal-700",
            stats: [
                { label: "Game", val: "30 Hrs", width: "90%", color: "bg-emerald-300" },
                { label: "Video", val: "15 Hrs", width: "70%", color: "bg-lime-300" },
                { label: "Social", val: "12 Hrs", width: "45%", color: "bg-teal-200" }
            ]
        };
        const dataC = {
            chartData: [13.5, 24, 45, 5.6, 6, 1.6],
            title: "Social Butterflies ğŸ¦‹",
            badge: "Activity Analysis",
            bgClass: "from-purple-600 to-pink-700",
            stats: [
                { label: "Social", val: "45 Act", width: "95%", color: "bg-purple-400" },
                { label: "Game", val: "24 Act", width: "50%", color: "bg-pink-300" },
                { label: "Video", val: "13.5 Act", width: "30%", color: "bg-rose-300" }
            ]
        };

        let currentStoryId = 1;
        let myRadarChart = null;

        // --- FUNCTIONS ---

        function initChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            myRadarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Video', 'Game', 'Social', 'Work', 'Edu', 'Download'],
                    datasets: [{
                        label: 'Usage',
                        data: dataA.chartData,
                        backgroundColor: 'rgba(255, 255, 255, 0.2)',
                        borderColor: 'rgba(255, 255, 255, 0.9)',
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#fff',
                        borderWidth: 2,
                        pointRadius: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: { color: 'rgba(255, 255, 255, 0.7)', font: { size: 9 } },
                            ticks: { display: false, maxTicksLimit: 3 },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    animation: { duration: 1000 }
                }
            });
        }

        function switchMode(mode) {
            const btnA = document.getElementById('btnA');
            const btnB = document.getElementById('btnB');
            const btnC = document.getElementById('btnC');
            
            // Reset Buttons
            [btnA, btnB, btnC].forEach(btn => {
                btn.className = "w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-inactive text-left flex items-center gap-2";
            });
            
            let data;
            if(mode === 'A') {
                data = dataA;
                btnA.classList.remove('btn-inactive');
                btnA.classList.add('btn-purple');
            } else if(mode === 'B') {
                data = dataB;
                btnB.classList.remove('btn-inactive');
                btnB.classList.add('btn-teal');
            } else {
                data = dataC;
                btnC.classList.remove('btn-inactive');
                btnC.classList.add('btn-purple');
            }

            const section1 = document.getElementById('section1');
            section1.className = `relative rounded-3xl p-5 text-white shadow-lg overflow-hidden transition-all duration-500 bg-gradient-to-br ${data.bgClass}`;
            document.getElementById('vibeTitle').innerText = data.title;
            document.getElementById('vibeBadge').innerText = data.badge;

            data.stats.forEach((stat, index) => {
                const i = index + 1;
                document.getElementById(`label${i}`).innerText = stat.label;
                document.getElementById(`val${i}`).innerText = stat.val;
                const bar = document.getElementById(`bar${i}`);
                bar.style.width = stat.width;
                bar.className = `h-full rounded-full transition-all duration-700 ${stat.color}`;
            });

            myRadarChart.data.datasets[0].data = data.chartData;
            myRadarChart.update();
        }

        function switchStory(id) {
            currentStoryId = id;
            const data = stories[id];
            
            // Update Sidebar Buttons
            for(let i=1; i<=5; i++) {
                const btn = document.getElementById(`storyBtn${i}`);
                if(i === id) {
                    btn.className = "w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-orange text-left flex items-center gap-2";
                } else {
                    btn.className = "w-full py-2 px-4 rounded-lg text-xs font-bold transition-all btn-inactive text-left flex items-center gap-2";
                }
            }

            // Update Card Content with Animation
            const contentEl = document.getElementById('storyContent');
            const titleEl = document.getElementById('storyTitle');
            const iconContainer = document.getElementById('storyIcon');
            const icon = iconContainer.querySelector('i');

            // Fade out effect simulation (simplified)
            contentEl.innerHTML = data.content;
            contentEl.classList.remove('fade-in');
            void contentEl.offsetWidth; // trigger reflow
            contentEl.classList.add('fade-in');

            titleEl.innerText = data.title;
            icon.className = `fa-solid ${data.icon}`;
            iconContainer.className = `p-1.5 rounded-lg text-xs ${data.color}`;
        }

        function showCurrentPrompt() {
            const sidebar = document.getElementById('promptSidebar');
            const content = document.getElementById('promptContent');
            
            content.innerText = prompts[currentStoryId];
            
            sidebar.classList.remove('opacity-0', 'translate-x-10', 'pointer-events-none');
            sidebar.classList.add('opacity-100', 'translate-x-0', 'pointer-events-auto');
        }

        function closePrompt() {
            const sidebar = document.getElementById('promptSidebar');
            sidebar.classList.add('opacity-0', 'translate-x-10', 'pointer-events-none');
            sidebar.classList.remove('opacity-100', 'translate-x-0', 'pointer-events-auto');
        }

        function editFamilyName(element) {
            const familyNameEl = document.getElementById('familyName');
            const currentName = familyNameEl.textContent.trim().replace(/\s*Edit$/, '');
            let newName = prompt("Enter new family name:", currentName);
            if (newName !== null && newName.trim() !== "") {
                familyNameEl.textContent = newName.trim();
            }
        }

        function showBadgeDetails(title, user, desc, totalDays, consecutiveDays) {
            const modal = document.getElementById('badgeModal');
            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalUser').innerText = user;
            document.getElementById('modalDesc').innerText = desc;
            document.getElementById('modalTotal').innerText = totalDays;
            document.getElementById('modalStreak').innerText = consecutiveDays;
            
            const iconDiv = document.getElementById('modalIcon');
            let icon = 'ğŸ†';
            let colorClass = 'text-amber-500 border-amber-100 bg-amber-50';
            
            if (title.includes('Bird')) { icon = 'ğŸŒ…'; }
            else if (title.includes('Owl')) { icon = 'ğŸ¦‰'; colorClass = 'text-indigo-500 border-indigo-100 bg-indigo-50'; }
            else if (title.includes('Monster')) { icon = 'ğŸ¦–'; colorClass = 'text-rose-500 border-rose-100 bg-rose-50'; }
            else if (title.includes('Focus')) { icon = 'ğŸ§˜'; colorClass = 'text-blue-500 border-blue-100 bg-blue-50'; }
            
            iconDiv.innerHTML = icon;
            iconDiv.className = `w-20 h-20 rounded-full flex items-center justify-center mb-4 text-4xl shadow-sm border-4 ${colorClass}`;
            
            modal.classList.remove('hidden-modal');
            modal.classList.add('visible-modal');
        }

        function closeBadgeModal() {
            const modal = document.getElementById('badgeModal');
            modal.classList.remove('visible-modal');
            modal.classList.add('hidden-modal');
        }

        // Initialize
        window.onload = function() {
            initChart();
            switchStory(1); // Load default story
        };
    </script>
</body>
</html>
