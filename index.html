<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Insight - Stories Enhanced</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #e2e8f0; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animation utils */
        .slide-enter-active, .slide-leave-active { transition: transform 0.3s ease-in-out; }
        .slide-enter-from, .slide-leave-to { transform: translateX(100%); }
        .slide-enter-to, .slide-leave-from { transform: translateX(0); }

        /* Custom buttons */
        .btn-purple {
            background: linear-gradient(135deg, #7c3aed, #6d28d9);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(124, 58, 237, 0.3);
        }
        .btn-teal {
            background: linear-gradient(135deg, #0d9488, #0f766e);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(13, 148, 136, 0.3);
        }
        .btn-inactive {
            background: white;
            color: #4b5563;
            border: 1px solid #e5e7eb;
        }
        .btn-inactive:hover { background: #f9fafb; }
        
        .editable:hover .edit-icon { opacity: 1; }
        .edit-icon { opacity: 0; transition: opacity 0.2s; margin-left: 4px; cursor: pointer; }

        /* Card styles for stories */
        .story-card {
            transition: all 0.3s ease;
        }
        .story-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Prompt Sidebar Animation */
        #promptSidebar {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen py-10 relative overflow-x-hidden">

    <!-- Mode Switcher -->
    <div class="fixed top-6 left-6 z-50 bg-white p-4 rounded-xl shadow-xl border border-slate-200 w-64 hidden xl:block">
        <h3 class="text-sm font-bold text-slate-400 uppercase mb-3">Leader View Control</h3>
        <div class="space-y-2">
            <button onclick="switchMode('A')" id="btnA" class="w-full py-2 px-4 rounded-lg text-sm font-bold transition-all btn-purple">
                Plan A: Traffic View (ÊµÅÈáè)
            </button>
            <button onclick="switchMode('B')" id="btnB" class="w-full py-2 px-4 rounded-lg text-sm font-bold transition-all btn-inactive">
                Plan B: Time View (Êó∂Èïø)
            </button>
            <button onclick="switchMode('C')" id="btnC" class="w-full py-2 px-4 rounded-lg text-sm font-bold transition-all btn-inactive">
                Plan C: Activity View (Ê¥ªË∑ÉÂ∫¶)
            </button>
        </div>
    </div>

    <!-- Prompt Sidebar (Right Side) -->
    <div id="promptSidebar" class="fixed top-1/2 -translate-y-1/2 right-6 xl:right-20 z-40 w-80 bg-white p-6 rounded-2xl shadow-2xl border border-slate-200 opacity-0 translate-x-10 pointer-events-none transition-all duration-500">
        <div class="flex justify-between items-center mb-4 border-b border-slate-100 pb-2">
            <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest">Prompt Details</h3>
            <button onclick="closePrompt()" class="text-slate-400 hover:text-slate-600"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div id="promptContent" class="text-sm text-slate-600 leading-relaxed font-mono bg-slate-50 p-3 rounded-lg border border-slate-100">
            Select a story card to view the underlying prompt.
        </div>
        <div class="mt-4 pt-2 border-t border-slate-100 flex items-center gap-2 text-xs text-slate-400">
            <i class="fa-solid fa-robot"></i>
            <span>Generated by AI Model</span>
        </div>
    </div>

    <!-- Main Mobile Device -->
    <div class="w-full max-w-[400px] bg-slate-50 h-[850px] rounded-[40px] shadow-2xl overflow-hidden border-[8px] border-slate-900 relative flex flex-col">
        
        <!-- Status Bar -->
        <div class="px-6 pt-4 pb-2 flex justify-between items-center text-xs font-bold text-slate-900 z-50 bg-slate-50 shrink-0">
            <span>9:41</span>
            <div class="flex gap-1.5">
                <i class="fa-solid fa-signal"></i>
                <i class="fa-solid fa-wifi"></i>
                <i class="fa-solid fa-battery-full"></i>
            </div>
        </div>

        <!-- HOME VIEW CONTAINER -->
        <div id="homeView" class="flex flex-col h-full w-full absolute top-0 left-0 pt-[44px] transition-transform duration-300 ease-in-out bg-slate-50">
            
            <header class="px-6 py-2 pb-4 bg-slate-50 flex justify-between items-center shrink-0">
                <div class="editable" onclick="editFamilyName(this)">
                    <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Family Insight</div>
                    <h1 id="familyName" class="text-2xl font-extrabold text-slate-800 tracking-tight inline-block">
                        The Millers
                        <span class="edit-icon text-slate-400">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </span>
                    </h1>
                </div>
                <div class="w-10 h-10 rounded-full bg-slate-200 overflow-hidden border-2 border-white shadow-sm">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Admin" alt="Admin">
                </div>
            </header>

            <main class="flex-1 overflow-y-auto hide-scrollbar px-5 pb-8 space-y-6">

                <!-- Section 1 -->
                <section id="section1" class="relative rounded-3xl p-5 text-white shadow-lg overflow-hidden transition-all duration-500 bg-gradient-to-br from-indigo-600 to-purple-700">
                    <div class="absolute -top-10 -right-10 w-40 h-40 bg-white opacity-10 rounded-full blur-3xl"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-1">
                            <div>
                                <p class="text-indigo-200 text-xs font-bold uppercase tracking-wider">Section 1: The Digital Vibe</p>
                                <h2 id="vibeTitle" class="text-xl font-bold">Cinema Paradise üé¨</h2>
                            </div>
                            <span id="vibeBadge" class="bg-white/20 backdrop-blur-md px-2 py-1 rounded text-[10px] font-bold border border-white/10">Traffic Analysis</span>
                        </div>
                        <div class="flex items-center mt-2">
                            <div class="w-[180px] h-[180px] relative -ml-2">
                                <canvas id="radarChart"></canvas>
                            </div>
                            <div class="flex-1 pl-2 space-y-3">
                                <div class="group">
                                    <div class="flex justify-between text-xs text-indigo-100 mb-0.5"><span id="label1">Video</span><span id="val1" class="font-bold text-white">90 GB</span></div>
                                    <div class="w-full bg-black/20 h-1.5 rounded-full overflow-hidden"><div id="bar1" class="h-full bg-amber-400 rounded-full" style="width: 90%"></div></div>
                                </div>
                                <div class="group">
                                    <div class="flex justify-between text-xs text-indigo-100 mb-0.5"><span id="label2">Download</span><span id="val2" class="font-bold text-white">30 GB</span></div>
                                    <div class="w-full bg-black/20 h-1.5 rounded-full overflow-hidden"><div id="bar2" class="h-full bg-pink-400 rounded-full" style="width: 70%"></div></div>
                                </div>
                                <div class="group">
                                    <div class="flex justify-between text-xs text-indigo-100 mb-0.5"><span id="label3">Game</span><span id="val3" class="font-bold text-white">15 GB</span></div>
                                    <div class="w-full bg-black/20 h-1.5 rounded-full overflow-hidden"><div id="bar3" class="h-full bg-cyan-400 rounded-full" style="width: 30%"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 2: Clickable -->
                <section onclick="openStories()" class="bg-white rounded-3xl p-5 shadow-sm border border-slate-100 cursor-pointer hover:border-indigo-100 hover:shadow-md transition-all group relative overflow-hidden">
                    <div class="absolute right-0 top-0 w-20 h-20 bg-indigo-50 rounded-bl-full -mr-10 -mt-10 transition-transform group-hover:scale-110"></div>
                    
                    <div class="flex justify-between items-start relative z-10">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="bg-orange-100 text-orange-600 p-1.5 rounded-lg text-xs"><i class="fa-solid fa-newspaper"></i></span>
                            <h3 class="font-bold text-slate-800 text-sm uppercase">Section 2: Miller's Scoop</h3>
                        </div>
                        <i class="fa-solid fa-chevron-right text-slate-300 group-hover:text-indigo-500 transition-colors"></i>
                    </div>
                    
                    <div class="space-y-3 relative z-10">
                        <div class="flex gap-3 items-center">
                            <div class="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-lg flex-shrink-0">üåÖ</div>
                            <div class="text-xs text-slate-600">
                                <span class="font-bold text-slate-800">Latest Story Generated</span>
                                <p class="line-clamp-1">Dad started the day with emails...</p>
                            </div>
                        </div>
                        <div class="w-full bg-slate-50 p-2 rounded-lg text-center text-xs font-bold text-indigo-600 mt-2 group-hover:bg-indigo-50 transition-colors">
                            View all 5 Story Variations
                        </div>
                    </div>
                </section>

                <!-- Section 3 -->
                <section class="bg-white rounded-3xl p-5 shadow-sm border border-slate-100">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="bg-green-100 text-green-600 p-1.5 rounded-lg text-xs"><i class="fa-solid fa-bolt"></i></span>
                        <h3 class="font-bold text-slate-800 text-sm uppercase">Section 3: Live Activity</h3>
                    </div>
                    <div class="relative pl-4 border-l-2 border-slate-100 space-y-5">
                        <div class="relative">
                            <div class="absolute -left-[21px] top-0 h-3 w-3 rounded-full bg-blue-500 border-2 border-white shadow"></div>
                            <div class="flex justify-between items-start"><p class="text-xs font-bold text-slate-700">Dad's iPhone connected to Wi-Fi</p><span class="text-[10px] text-slate-400 font-mono">18:30</span></div>
                        </div>
                        <div class="relative">
                            <div class="absolute -left-[21px] top-0 h-3 w-3 rounded-full bg-purple-500 border-2 border-white shadow"></div>
                            <div class="flex justify-between items-start"><p class="text-xs font-bold text-slate-700">Jack's PC hit peak (50MB/s)</p><span class="text-[10px] text-slate-400 font-mono">16:45</span></div>
                        </div>
                        <div class="relative">
                            <div class="absolute -left-[21px] top-0 h-3 w-3 rounded-full bg-pink-500 border-2 border-white shadow"></div>
                            <div class="flex justify-between items-start"><p class="text-xs font-bold text-slate-700">Emma on Roblox for 2 hours</p><span class="text-[10px] text-slate-400 font-mono">15:00</span></div>
                        </div>
                    </div>
                </section>

                <!-- Section 4 -->
                <section class="bg-gradient-to-r from-slate-800 to-slate-900 rounded-3xl p-5 text-white shadow-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-sm uppercase text-slate-400">Section 4: Digital Sync</h3>
                        <i class="fa-regular fa-heart text-pink-500"></i>
                    </div>
                    <div class="bg-white/10 rounded-xl p-3 border border-white/20 relative overflow-hidden">
                        <div class="absolute right-0 top-0 w-16 h-16 bg-pink-500 blur-2xl opacity-20"></div>
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex -space-x-2">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Admin" class="w-8 h-8 rounded-full bg-slate-200 border-2 border-slate-800">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Molly" class="w-8 h-8 rounded-full bg-slate-200 border-2 border-slate-800">
                            </div>
                            <span class="text-xl font-bold text-pink-400">85%</span>
                        </div>
                        <div class="w-full bg-slate-700 h-1.5 rounded-full mb-2 overflow-hidden">
                            <div class="bg-gradient-to-r from-pink-500 to-purple-500 h-full rounded-full" style="width: 85%"></div>
                        </div>
                        <p class="text-[10px] text-slate-200 leading-tight">High Sync! Your evening streaming schedules align perfectly.</p>
                    </div>
                </section>

                <!-- Section 5 -->
                <section>
                    <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3 ml-1">Section 5: Daily Awards</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div onclick="showBadgeDetails('Early Bird', 'Mom', 'Online at 5:30 AM for Yoga.', 3, 2)" class="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center text-center shadow-sm active:scale-95 transition cursor-pointer">
                            <div class="w-10 h-10 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-2 text-lg shadow-sm border border-amber-100">üåÖ</div>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Early Bird</span>
                            <span class="text-sm font-bold text-slate-800">Mom</span>
                        </div>
                        <div onclick="showBadgeDetails('Night Owl', 'Kevin', 'Last offline: 02:45 AM.', 5, 4)" class="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center text-center shadow-sm active:scale-95 transition cursor-pointer">
                            <div class="w-10 h-10 bg-indigo-50 text-indigo-500 rounded-full flex items-center justify-center mb-2 text-lg shadow-sm border border-indigo-100">ü¶â</div>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Night Owl</span>
                            <span class="text-sm font-bold text-slate-800">Kevin</span>
                        </div>
                        <div onclick="showBadgeDetails('Data Monster', 'Jack', 'Consumed 42GB today.', 2, 1)" class="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center text-center shadow-sm active:scale-95 transition cursor-pointer">
                            <div class="w-10 h-10 bg-rose-50 text-rose-500 rounded-full flex items-center justify-center mb-2 text-lg shadow-sm border border-rose-100">ü¶ñ</div>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Data Monster</span>
                            <span class="text-sm font-bold text-slate-800">Jack</span>
                        </div>
                        <div onclick="showBadgeDetails('Focus Master', 'Dad', '6h of Office Apps.', 10, 7)" class="bg-white p-4 rounded-2xl border border-slate-100 flex flex-col items-center text-center shadow-sm active:scale-95 transition cursor-pointer">
                            <div class="w-10 h-10 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-2 text-lg shadow-sm border border-blue-100">üßò</div>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Focus Master</span>
                            <span class="text-sm font-bold text-slate-800">Dad</span>
                        </div>
                    </div>
                </section>

                <!-- Section 6 -->
                <section class="bg-slate-200 rounded-3xl p-5 mb-10">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-slate-700 uppercase text-xs">Section 6: Family Time</h3>
                        <i class="fa-solid fa-utensils text-slate-400"></i>
                    </div>
                    <div class="bg-white rounded-xl p-4 shadow-sm">
                        <p class="text-xs text-slate-500 mb-4">Select devices to pause internet for dinner time:</p>
                        <div class="space-y-3 mb-4">
                            <label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" checked class="w-4 h-4 accent-slate-800 rounded"><span class="text-sm font-bold text-slate-700">Jack's PC</span></label>
                            <label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" checked class="w-4 h-4 accent-slate-800 rounded"><span class="text-sm font-bold text-slate-700">Emma's iPad</span></label>
                            <label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" class="w-4 h-4 accent-slate-800 rounded"><span class="text-sm font-bold text-slate-700">Dad's Laptop</span></label>
                        </div>
                        <button onclick="toggleDetox(this)" class="w-full py-3 bg-slate-800 text-white rounded-lg font-bold text-sm hover:bg-slate-700 transition active:scale-95 flex items-center justify-center gap-2"><span>Pause Internet</span><i class="fa-solid fa-pause"></i></button>
                    </div>
                </section>

            </main>
            
            <nav class="h-20 bg-white border-t border-slate-100 flex justify-around items-center pb-2 shrink-0 z-20">
                <div class="flex flex-col items-center gap-1 text-slate-400"><i class="fa-solid fa-house text-lg"></i><span class="text-[10px] font-medium">Home</span></div>
                <div class="flex flex-col items-center gap-1 text-indigo-600"><i class="fa-solid fa-chart-pie text-lg"></i><span class="text-[10px] font-medium">Insight</span></div>
                <div class="flex flex-col items-center gap-1 text-slate-400"><i class="fa-solid fa-shield-halved text-lg"></i><span class="text-[10px] font-medium">Safety</span></div>
                <div class="flex flex-col items-center gap-1 text-slate-400"><i class="fa-solid fa-gear text-lg"></i><span class="text-[10px] font-medium">Settings</span></div>
            </nav>
        </div>

        <!-- STORY VIEW CONTAINER (Hidden by default) -->
        <div id="storyView" class="flex flex-col h-full w-full absolute top-0 left-0 pt-[44px] translate-x-full transition-transform duration-300 ease-in-out bg-slate-100 z-40">
            <header class="px-5 py-3 flex items-center gap-4 bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-10">
                <button onclick="closeStories()" class="w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 transition-colors">
                    <i class="fa-solid fa-arrow-left text-sm"></i>
                </button>
                <h2 class="text-lg font-bold text-slate-800">Today's Stories</h2>
            </header>

            <main class="flex-1 overflow-y-auto hide-scrollbar px-5 py-6 space-y-4">
                
                <!-- Card 1: Default Safe -->
                <div class="story-card bg-white p-5 rounded-2xl shadow-sm border border-slate-100 relative group overflow-hidden">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-blue-50 rounded-bl-full -mr-6 -mt-6"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center text-sm"><i class="fa-solid fa-shield-cat"></i></div>
                                <h3 class="font-bold text-slate-800 text-sm">Default Safe</h3>
                            </div>
                            <button onclick="showPrompt(1)" class="text-xs font-bold text-blue-500 hover:text-blue-700 bg-blue-50 px-2 py-1 rounded-md transition-colors">Prompt</button>
                        </div>
                        <div class="text-sm text-slate-600 leading-relaxed font-medium">
                            Dad started the day with emails and light videos ‚òï<br>
                            Mom checked social feeds between daily tasks.<br>
                            Kids switched between homework and short video breaks.<br>
                            In the evening, the house settled into streaming and scrolling üì∫<br>
                            A balanced day of work, learning, and relaxation.
                        </div>
                    </div>
                </div>

                <!-- Card 2: Gamified -->
                <div class="story-card bg-white p-5 rounded-2xl shadow-sm border border-slate-100 relative group overflow-hidden">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-purple-50 rounded-bl-full -mr-6 -mt-6"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-purple-100 text-purple-600 flex items-center justify-center text-sm"><i class="fa-solid fa-gamepad"></i></div>
                                <h3 class="font-bold text-slate-800 text-sm">Gamified Story</h3>
                            </div>
                            <button onclick="showPrompt(2)" class="text-xs font-bold text-purple-500 hover:text-purple-700 bg-purple-50 px-2 py-1 rounded-md transition-colors">Prompt</button>
                        </div>
                        <div class="text-sm text-slate-600 leading-relaxed font-medium">
                            Morning quests began with work emails and school videos üéÆ<br>
                            By noon, tasks were cleared and skills leveled up.<br>
                            Afternoon playtime unlocked games and chats.<br>
                            Night mode activated with streaming and late scrolling üåô<br>
                            All players logged off successfully.
                        </div>
                    </div>
                </div>

                <!-- Card 3: Gossip -->
                <div class="story-card bg-white p-5 rounded-2xl shadow-sm border border-slate-100 relative group overflow-hidden">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-rose-50 rounded-bl-full -mr-6 -mt-6"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-rose-100 text-rose-600 flex items-center justify-center text-sm"><i class="fa-solid fa-newspaper"></i></div>
                                <h3 class="font-bold text-slate-800 text-sm">Family Gossip</h3>
                            </div>
                            <button onclick="showPrompt(3)" class="text-xs font-bold text-rose-500 hover:text-rose-700 bg-rose-50 px-2 py-1 rounded-md transition-colors">Prompt</button>
                        </div>
                        <div class="text-sm text-slate-600 leading-relaxed font-medium">
                            Dad stayed loyal to work apps, with a few video breaks üëÄ<br>
                            Mom kept up with social updates all day.<br>
                            The kids bounced between schoolwork and games.<br>
                            After dinner, everyone went quiet‚Äîscreens on, lights low üì±<br>
                            Classic family internet drama.
                        </div>
                    </div>
                </div>

                <!-- Card 4: Behavior -->
                <div class="story-card bg-white p-5 rounded-2xl shadow-sm border border-slate-100 relative group overflow-hidden">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-teal-50 rounded-bl-full -mr-6 -mt-6"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-teal-100 text-teal-600 flex items-center justify-center text-sm"><i class="fa-solid fa-magnifying-glass-chart"></i></div>
                                <h3 class="font-bold text-slate-800 text-sm">Behavior Insight</h3>
                            </div>
                            <button onclick="showPrompt(4)" class="text-xs font-bold text-teal-500 hover:text-teal-700 bg-teal-50 px-2 py-1 rounded-md transition-colors">Prompt</button>
                        </div>
                        <div class="text-sm text-slate-600 leading-relaxed font-medium">
                            Morning activity leaned toward productivity and study.<br>
                            Midday usage was lighter and more fragmented.<br>
                            Afternoons mixed learning with entertainment.<br>
                            Evenings showed synchronized screen time across the family üìä<br>
                            Clear routines, minimal conflict.
                        </div>
                    </div>
                </div>

                 <!-- Card 5: Atmospheric -->
                 <div class="story-card bg-white p-5 rounded-2xl shadow-sm border border-slate-100 relative group overflow-hidden">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-amber-50 rounded-bl-full -mr-6 -mt-6"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 rounded-lg bg-amber-100 text-amber-600 flex items-center justify-center text-sm"><i class="fa-solid fa-cloud-moon"></i></div>
                                <h3 class="font-bold text-slate-800 text-sm">Atmospheric</h3>
                            </div>
                            <button onclick="showPrompt(5)" class="text-xs font-bold text-amber-500 hover:text-amber-700 bg-amber-50 px-2 py-1 rounded-md transition-colors">Prompt</button>
                        </div>
                        <div class="text-sm text-slate-600 leading-relaxed font-medium">
                            The day began quietly, screens waking with the house üåÖ<br>
                            Signals flowed in and out through shared routines.<br>
                            Laughter, focus, and pauses filled the afternoon.<br>
                            By night, soft light and steady streams took over ‚ú®<br>
                            The home rested online.
                        </div>
                    </div>
                </div>
                
                <div class="h-10"></div>
            </main>
        </div>

    </div>

    <script>
        // --- STORY NAVIGATION ---
        function openStories() {
            const homeView = document.getElementById('homeView');
            const storyView = document.getElementById('storyView');
            
            // Slide effect
            storyView.classList.remove('translate-x-full');
            // Slight scale down of home view for depth effect (optional, kept simple for now)
            // homeView.classList.add('-translate-x-1/4', 'opacity-50'); 
        }

        function closeStories() {
            const homeView = document.getElementById('homeView');
            const storyView = document.getElementById('storyView');
            
            storyView.classList.add('translate-x-full');
            // homeView.classList.remove('-translate-x-1/4', 'opacity-50');
            
            // Also close prompt sidebar
            closePrompt();
        }

        // --- PROMPT SIDEBAR LOGIC ---
        const prompts = {
            1: `Based on a full day of family network logs, generate a neutral, friendly ‚ÄúToday‚Äôs Network Story‚Äù.
Summarize work, study, and entertainment across the whole day.
Limit to under 60 words.
Use short sentences (one sentence per line).
Use no more than 5 emojis.
Avoid numbers and heavy statistics.
Tone: calm, balanced, family-friendly.`,
            2: `Turn today‚Äôs family network activity into a light gamified story.
Describe the day as levels, missions, or rounds.
Cover morning to night.
Under 60 words.
One sentence per line.
No more than 5 emojis.
Avoid exact data values.
Tone: playful, energetic.`,
            3: `Write today‚Äôs family network story like a light gossip column.
Focus on ‚Äúwho did what online‚Äù throughout the day.
Keep it playful, not judgmental.
Under 60 words.
One sentence per line.
Max 5 emojis.
Avoid numbers and technical terms.`,
            4: `Summarize today‚Äôs family network usage from a behavioral insight perspective.
Focus on patterns and rhythms, not details.
Morning to night coverage.
Under 60 words.
One sentence per line.
Max 5 emojis.
Tone: observational, thoughtful.`,
            5: `Create an abstract, atmospheric story based on a full day of family network activity.
Focus on mood and flow, not specific actions.
Under 60 words.
One sentence per line.
Use up to 5 emojis.
Language should feel calm and visual.`
        };

        function showPrompt(id) {
            const sidebar = document.getElementById('promptSidebar');
            const content = document.getElementById('promptContent');
            
            content.innerText = prompts[id];
            
            sidebar.classList.remove('opacity-0', 'translate-x-10', 'pointer-events-none');
            sidebar.classList.add('opacity-100', 'translate-x-0', 'pointer-events-auto');
        }

        function closePrompt() {
            const sidebar = document.getElementById('promptSidebar');
            sidebar.classList.add('opacity-0', 'translate-x-10', 'pointer-events-none');
            sidebar.classList.remove('opacity-100', 'translate-x-0', 'pointer-events-auto');
        }

        // --- ORIGINAL FUNCTIONALITY ---
        function editFamilyName(element) {
            const familyNameEl = document.getElementById('familyName');
            const currentName = familyNameEl.textContent.trim().replace(/\s*Edit$/, '');
            let newName = prompt("Enter new family name:", currentName);
            if (newName !== null && newName.trim() !== "") {
                familyNameEl.textContent = newName.trim();
            }
        }

        const dataA = {
            chartData: [90, 15, 10, 5, 5, 30],
            title: "Cinema Paradise üé¨",
            badge: "Traffic Analysis",
            bgClass: "from-indigo-600 to-purple-700",
            stats: [
                { label: "Video", val: "90 GB", width: "90%", color: "bg-amber-400" },
                { label: "Download", val: "30 GB", width: "70%", color: "bg-pink-400" },
                { label: "Game", val: "15 GB", width: "30%", color: "bg-cyan-400" }
            ]
        };
        const dataB = {
            chartData: [15, 30, 12, 8, 6, 4],
            title: "E-Sports Camp üéÆ",
            badge: "Time Analysis",
            bgClass: "from-emerald-600 to-teal-700",
            stats: [
                { label: "Game", val: "30 Hrs", width: "90%", color: "bg-emerald-300" },
                { label: "Video", val: "15 Hrs", width: "70%", color: "bg-lime-300" },
                { label: "Social", val: "12 Hrs", width: "45%", color: "bg-teal-200" }
            ]
        };
        const dataC = {
            chartData: [13.5, 24, 45, 5.6, 6, 1.6],
            title: "Social Butterflies ü¶ã",
            badge: "Activity Analysis",
            bgClass: "from-purple-600 to-pink-700",
            stats: [
                { label: "Social", val: "45 Act", width: "95%", color: "bg-purple-400" },
                { label: "Game", val: "24 Act", width: "50%", color: "bg-pink-300" },
                { label: "Video", val: "13.5 Act", width: "30%", color: "bg-rose-300" }
            ]
        };

        let currentMode = 'A';
        let myRadarChart = null;

        function initChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            myRadarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Video', 'Game', 'Social', 'Work', 'Edu', 'Download'],
                    datasets: [{
                        label: 'Usage',
                        data: dataA.chartData,
                        backgroundColor: 'rgba(255, 255, 255, 0.2)',
                        borderColor: 'rgba(255, 255, 255, 0.9)',
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#fff',
                        borderWidth: 2,
                        pointRadius: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: { color: 'rgba(255, 255, 255, 0.7)', font: { size: 9 } },
                            ticks: { display: false, maxTicksLimit: 3 },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    animation: { duration: 1000 }
                }
            });
        }

        function switchMode(mode) {
            currentMode = mode;
            const btnA = document.getElementById('btnA');
            const btnB = document.getElementById('btnB');
            const btnC = document.getElementById('btnC');
            
            btnA.className = "w-full py-2 px-4 rounded-lg text-sm font-bold transition-all btn-inactive";
            btnB.className = "w-full py-2 px-4 rounded-lg text-sm font-bold transition-all btn-inactive";
            btnC.className = "w-full py-2 px-4 rounded-lg text-sm font-bold transition-all btn-inactive";
            
            let data;
            if(mode === 'A') {
                data = dataA;
                btnA.classList.remove('btn-inactive');
                btnA.classList.add('btn-purple');
            } else if(mode === 'B') {
                data = dataB;
                btnB.classList.remove('btn-inactive');
                btnB.classList.add('btn-teal');
            } else {
                data = dataC;
                btnC.classList.remove('btn-inactive');
                btnC.classList.add('btn-purple');
            }

            const section1 = document.getElementById('section1');
            section1.className = `relative rounded-3xl p-5 text-white shadow-lg overflow-hidden transition-all duration-500 bg-gradient-to-br ${data.bgClass}`;
            document.getElementById('vibeTitle').innerText = data.title;
            document.getElementById('vibeBadge').innerText = data.badge;

            data.stats.forEach((stat, index) => {
                const i = index + 1;
                document.getElementById(`label${i}`).innerText = stat.label;
                document.getElementById(`val${i}`).innerText = stat.val;
                const bar = document.getElementById(`bar${i}`);
                bar.style.width = stat.width;
                bar.className = `h-full rounded-full transition-all duration-700 ${stat.color}`;
            });

            myRadarChart.data.datasets[0].data = data.chartData;
            myRadarChart.update();
        }

        function showBadgeDetails(title, user, desc, totalDays, consecutiveDays) {
            alert(`üèÜ Achievement Unlocked: ${title}\n\nWinner: ${user}\nReason: ${desc}\n\nTotal days held: ${totalDays}\nConsecutive days: ${consecutiveDays}`);
        }

        function toggleDetox(btn) {
            const icon = btn.querySelector('i');
            const span = btn.querySelector('span');
            
            if (span.innerText === "Pause Internet") {
                btn.classList.replace('bg-slate-800', 'bg-red-500');
                btn.classList.replace('hover:bg-slate-700', 'hover:bg-red-400');
                span.innerText = "Resume Internet";
                icon.className = "fa-solid fa-play";
                alert("‚è∏Ô∏è Internet paused for selected devices. Enjoy family time!");
            } else {
                btn.classList.replace('bg-red-500', 'bg-slate-800');
                btn.classList.replace('hover:bg-red-400', 'hover:bg-slate-700');
                span.innerText = "Pause Internet";
                icon.className = "fa-solid fa-pause";
                alert("‚ñ∂Ô∏è Internet resumed.");
            }
        }

        window.onload = initChart;
    </script>
</body>
</html>
